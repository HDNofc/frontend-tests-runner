# funbox-frontend-tests-runner

funbox-frontend-tests-runner — это библиотека, позволяющая запускать mocha-тесты в несколько потоков и с поддержкой live-режима.

Скрипты запуска тестов были выделены из окружения для проектов на Angular 1 в отдельную библиотеку для более гибкого подхода к тестированию. Это позволяет разработчикам иметь возможность запускать тесты привычным им образом без привязки к фреймворку или средству сборки. Библиотека в свою очередь не знает какого типа тесты она запускает (unit- или e2e-тесты), не знает как запустить проект и на каком порту проект будет работать, что позволяет абстрагироваться от системы сборки (webpack/gulp и т.п.).

## Подключение библиотеки в проект

Подключение библиотеки в проект выглядит следующим образом

```javascript
const config = {
  parallelTestsCount: 2,
  testFiles: './src/tests/e2e/*.js',
  project: {
    build() {
      // функция билда проекта, должна возвращать Promise
    },
    addListener(event) {
      // Функция подписки на 2 возможных события buildStart - проект начал собираться, buildFinish - проект закончил собираться; нужно для live-тестов
    }
  }
}

const Runner = require('funbox-frontend-tests-runner');
const runner = new Runner(config);
runner.start();
```

Для примера подключения библиотеки в проект на основе окружения funbox-frontend-env-webpack смотри в папку examples.

## Конфигурация

* parallelTestsCount - количество файлов с тестами, запускающихся одновременно
* live - запуск тестов в live-режиме (слежение за изменениями тестов, слежение за изменением проекта)
* separatedLogs - запись логов по каждому тест-файлу после прогона тестов в папку test-logs
* testFiles - glob файлов с тестами (например, tests/\*.js)
* timeout - опция timeout для mocha
* retries - опция retries (количество повторов запуска тестов при падении) для mocha
